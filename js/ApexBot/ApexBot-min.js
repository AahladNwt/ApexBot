function ApexBot(){this.speech=new SpeechSynthesisUtterance,this.speechRecognition=new webkitSpeechRecognition}ApexBot.prototype.loadSettings=function(a){this.settings=a},ApexBot.prototype.start=function(a){var b=this;this.speechRecognition.lang=this.settings.Listening.General.Language,this.speechRecognition.continuous=this.settings.Listening.General.Continuous,this.speechRecognition.interimResults=this.settings.Listening.General.Interim_results,this.speech.lang=this.settings.Speaking.General.Language,this.speech.rate=this.settings.Speaking.General.Rate,this.speechRecognition.onresult=function(a){a.results[a.results.length-1].isFinal&&a.results[a.results.length-1][0].confidence>.4&&b.execCommand(a.results[a.results.length-1][0].transcript.trim())},this.speechRecognition.start(),this.speech.onend=function(a){b.updateIndicator(!1)},this.speech.onstart=function(a){b.updateIndicator(!0)},this.speechRecognition.onend=function(){b.speechRecognition.start()}},ApexBot.prototype.talk=function(a,b){if(State.BotActive){var c=document.getElementById("message"),d=document.getElementById("altMessage");c.textContent="",d.textContent="",a.constructor===Array&&(a=a[Math.floor(Math.random()*a.length)]),State.SpeakingAllowed&&(this.speech.text=a,window.speechSynthesis.speak(this.speech));var e=a.length>19?500:200,f=a.length>19?1e3:600;$("section").is(":visible")||$("section").fadeIn(100),$("section > div > span > h1").fadeOut(e,function(){c.textContent=a,d.textContent=b}).fadeIn(f)}},ApexBot.prototype.updateIndicator=function(a){var b=this;$("#statusDisplay").fadeOut(100,function(){$("#statusDisplay").attr("src",a?b.settings.Speaking.General.Indicator:b.settings.Listening.General.Indicator)}).fadeIn(600)},ApexBot.prototype.displaySettings=function(){return console.log(this.settings),this.settings},ApexBot.prototype.addCommand=function(a,b){if(a.constructor===Array)for(var c=0;c<a.length;c++)this.settings.Listening.Command[a[c]]=b;else this.settings.Listening.Command[a]=b},ApexBot.prototype.execCommand=function(a){console.log(a),void 0!==this.settings.Listening.Command[a]&&this.settings.Listening.Command[a]()},ApexBot.prototype.getJSON=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="json",c.onload=function(){var a=c.status;200==a?b(null,c.response):b(a)},c.send()};